<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    var tree = {
      val: 1,
      left: {
        val: 2,
        left: {
          val: 4,
          left: null,
          right: null
        },
        right: {
          val: 5,
          left: null,
          right: null
        }
      },
      right: {
        val: 3,
        left: null,
        right: null
      }
    }
    function dfsMid(node) {
      const stack = []
      let cur = node
      while(cur || stack.length > 0) {
        while(cur) {
          stack.push(cur)
          cur = cur.left
        }
        cur = stack.pop()

        console.log(cur.val)
        cur = cur.right
      }
    }

    function dfsPre(node) {
      const stack = []
      let cur = node
      while(cur || stack.length > 0) {
        while(cur) {
          stack.push(cur)
          console.log(cur.val)
          cur = cur.left
        }
        cur = stack.pop()
        cur = cur.right
      }
    }

    function dfsPost(node) {
      // 1 1 2 2 4
      // 
      const stack = []
      let cur = node
      while(true) {
        while(cur) {
          stack.push(cur)
          stack.push(cur)
          cur = cur.left
        }
        if(stack.length === 0) {
          return
        }
        cur = stack.pop()
        if(stack.length > 0 && stack[stack.length - 1] === cur) {
          cur = cur.right
        } else {
          console.log(cur.val)
          cur = null
        }
      }
    }

    // dfsMid(tree) // 4 2 5 1 3
    // dfsPre(tree) // 1 2 4 5 3
    dfsPost(tree) // 4 5 2 3 1
  </script>
</body>

</html>
